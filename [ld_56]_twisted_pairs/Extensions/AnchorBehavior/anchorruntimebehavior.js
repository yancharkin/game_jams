var gdjs;(function(c){let i;(function(t){t[t.None=0]="None",t[t.WindowLeft=1]="WindowLeft",t[t.WindowRight=2]="WindowRight",t[t.Proportional=3]="Proportional",t[t.WindowCenter=4]="WindowCenter"})(i||(i={}));let o;(function(t){t[t.None=0]="None",t[t.WindowTop=1]="WindowTop",t[t.WindowBottom=2]="WindowBottom",t[t.Proportional=3]="Proportional",t[t.WindowCenter=4]="WindowCenter"})(o||(o={}));class P extends c.RuntimeBehavior{constructor(n,e,s){super(n,e,s);this._invalidDistances=!0;this._leftEdgeDistance=0;this._rightEdgeDistance=0;this._topEdgeDistance=0;this._bottomEdgeDistance=0;this._useLegacyBottomAndRightAnchors=!1;this._relativeToOriginalWindowSize=!!e.relativeToOriginalWindowSize,this._leftEdgeAnchor=e.leftEdgeAnchor,this._rightEdgeAnchor=e.rightEdgeAnchor,this._topEdgeAnchor=e.topEdgeAnchor,this._bottomEdgeAnchor=e.bottomEdgeAnchor,this._useLegacyBottomAndRightAnchors=e.useLegacyBottomAndRightAnchors===void 0?!0:e.useLegacyBottomAndRightAnchors}updateFromBehaviorData(n,e){return n.leftEdgeAnchor!==e.leftEdgeAnchor&&(this._leftEdgeAnchor=e.leftEdgeAnchor),n.rightEdgeAnchor!==e.rightEdgeAnchor&&(this._rightEdgeAnchor=e.rightEdgeAnchor),n.topEdgeAnchor!==e.topEdgeAnchor&&(this._topEdgeAnchor=e.topEdgeAnchor),n.bottomEdgeAnchor!==e.bottomEdgeAnchor&&(this._bottomEdgeAnchor=e.bottomEdgeAnchor),n.useLegacyTrajectory!==e.useLegacyTrajectory&&(this._useLegacyBottomAndRightAnchors=e.useLegacyBottomAndRightAnchors),n.relativeToOriginalWindowSize===e.relativeToOriginalWindowSize}onActivate(){this._invalidDistances=!0}doStepPreEvents(n){const e=c.staticArray(c.AnchorRuntimeBehavior.prototype.doStepPreEvents);let s=n.getUnrotatedViewportMinX(),g=n.getUnrotatedViewportMinY(),t=n.getUnrotatedViewportMaxX(),d=n.getUnrotatedViewportMaxY(),E=(t+s)/2,_=(d+g)/2,l=t-s,f=d-g;const m=n.getLayer(this.owner.getLayer());if(this._invalidDistances){this._relativeToOriginalWindowSize&&(s=n.getInitialUnrotatedViewportMinX(),g=n.getInitialUnrotatedViewportMinY(),t=n.getInitialUnrotatedViewportMaxX(),d=n.getInitialUnrotatedViewportMaxY(),E=(t+s)/2,_=(d+g)/2,l=t-s,f=d-g);const h=m.convertCoords(this.owner.getDrawableX(),this.owner.getDrawableY(),0,e);this._leftEdgeAnchor===1?this._leftEdgeDistance=h[0]-s:this._leftEdgeAnchor===2?this._leftEdgeDistance=h[0]-t:this._leftEdgeAnchor===3?this._leftEdgeDistance=(h[0]-s)/l:this._leftEdgeAnchor===4&&(this._leftEdgeDistance=h[0]-E),this._topEdgeAnchor===1?this._topEdgeDistance=h[1]-g:this._topEdgeAnchor===2?this._topEdgeDistance=h[1]-d:this._topEdgeAnchor===3?this._topEdgeDistance=(h[1]-g)/f:this._topEdgeAnchor===4&&(this._topEdgeDistance=h[1]-_);const r=m.convertCoords(this.owner.getDrawableX()+this.owner.getWidth(),this.owner.getDrawableY()+this.owner.getHeight(),0,e);this._rightEdgeAnchor===1?this._rightEdgeDistance=r[0]-s:this._rightEdgeAnchor===2?this._rightEdgeDistance=r[0]-t:this._rightEdgeAnchor===3?this._rightEdgeDistance=(r[0]-s)/l:this._rightEdgeAnchor===4&&(this._rightEdgeDistance=r[0]-E),this._bottomEdgeAnchor===1?this._bottomEdgeDistance=r[1]-g:this._bottomEdgeAnchor===2?this._bottomEdgeDistance=r[1]-d:this._bottomEdgeAnchor===3?this._bottomEdgeDistance=(r[1]-g)/f:this._bottomEdgeAnchor===4&&(this._bottomEdgeDistance=r[1]-_),this._invalidDistances=!1}else{let h=0,r=0,w=0,A=0;this._leftEdgeAnchor===1?h=s+this._leftEdgeDistance:this._leftEdgeAnchor===2?h=t+this._leftEdgeDistance:this._leftEdgeAnchor===3?h=s+this._leftEdgeDistance*l:this._leftEdgeAnchor===4&&(h=E+this._leftEdgeDistance),this._topEdgeAnchor===1?r=g+this._topEdgeDistance:this._topEdgeAnchor===2?r=d+this._topEdgeDistance:this._topEdgeAnchor===3?r=g+this._topEdgeDistance*f:this._topEdgeAnchor===4&&(r=_+this._topEdgeDistance),this._rightEdgeAnchor===1?w=s+this._rightEdgeDistance:this._rightEdgeAnchor===2?w=t+this._rightEdgeDistance:this._rightEdgeAnchor===3?w=s+this._rightEdgeDistance*l:this._rightEdgeAnchor===4&&(w=E+this._rightEdgeDistance),this._bottomEdgeAnchor===1?A=g+this._bottomEdgeDistance:this._bottomEdgeAnchor===2?A=d+this._bottomEdgeDistance:this._bottomEdgeAnchor===3?A=g+this._bottomEdgeDistance*f:this._bottomEdgeAnchor===4&&(A=_+this._bottomEdgeDistance);const u=m.convertInverseCoords(h,r,0,e),p=u[0],a=u[1],D=m.convertInverseCoords(w,A,0,e),b=D[0],W=D[1];this._useLegacyBottomAndRightAnchors?(this._rightEdgeAnchor!==0&&this.owner.setWidth(b-p),this._bottomEdgeAnchor!==0&&this.owner.setHeight(W-a),this._leftEdgeAnchor!==0&&this.owner.setX(p+this.owner.getX()-this.owner.getDrawableX()),this._topEdgeAnchor!==0&&this.owner.setY(a+this.owner.getY()-this.owner.getDrawableY())):(this._rightEdgeAnchor!==0&&this._leftEdgeAnchor!==0?(this.owner.setWidth(b-p),this.owner.setX(p)):(this._leftEdgeAnchor!==0&&this.owner.setX(p+this.owner.getX()-this.owner.getDrawableX()),this._rightEdgeAnchor!==0&&this.owner.setX(b+this.owner.getX()-this.owner.getDrawableX()-this.owner.getWidth())),this._bottomEdgeAnchor!==0&&this._topEdgeAnchor!==0?(this.owner.setHeight(W-a),this.owner.setY(a)):(this._topEdgeAnchor!==0&&this.owner.setY(a+this.owner.getY()-this.owner.getDrawableY()),this._bottomEdgeAnchor!==0&&this.owner.setY(W+this.owner.getY()-this.owner.getDrawableY()-this.owner.getHeight())))}}doStepPostEvents(n){}}c.AnchorRuntimeBehavior=P,c.registerBehavior("AnchorBehavior::AnchorBehavior",c.AnchorRuntimeBehavior)})(gdjs||(gdjs={}));
//# sourceMappingURL=anchorruntimebehavior.js.map
